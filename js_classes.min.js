/**
 * Michael Crowe (crowebird - www.crowebird.com) - 2013
 * https://github.com/crowebird/js_classes
 */
(function(){var e={},t=this;t.js_classes=function(){};var n=function(){if(arguments.length>3||arguments.length==0)throw{name:"Error",message:"Invalid class declaration, invalid number of arguments"};var r=arguments[0];if(typeof r!="string"||!/^[$_A-Z][$_A-Z0-9]*?(?:[\.][$_A-Z][$_A-Z0-9]*?)*?$/i.test(r))throw{name:"Error",message:"Invalid class name, must be a string that represents a valid variable name that will be used as the class name"};var i=arguments[arguments.length==3?2:1];if(typeof i!="function")throw{name:"Error",message:"Invalid class function, a js_classes class can only be created by wrapping a function"};var s=arguments.length==3?arguments[1]:!1;if(s!==!1&&typeof s!="object")throw{name:"Error",message:"Invalid class Auto-Instantiate parameter, expecting an Object"};var o=this,u=!1;i.name=="abstract"&&(u=!0);var a=function(e){if(e!==js_classes.PREVENTCONSTRUCT&&u)throw{name:"Error",message:"You cannot create an instance of abstract class "+r};var n=[],s=new i,a=null;if(o!==t.js_classes){a=new o(js_classes.PREVENTCONSTRUCT);for(var f in a)a.hasOwnProperty(f)&&(s[f]?s[f]=function(e,t,n,i){if(typeof t!=typeof n)throw{name:"Error",message:"Class "+r+" cannot override "+e+" of type "+typeof n+" with type "+typeof t};if(typeof t=="function"){if(n.abstract&&n.definedArguments!=t.length)throw{name:"Error",message:"Declaration of "+r+"::"+f+" must be compatible with "+n.className+"::"+e};return function(){return t.apply({_super:i},arguments)}}return t}(f,s[f],a[f],a):s[f]=function(e,t){return t.abstract&&n.push(e),t}(f,a[f]))}for(var f in s)s.hasOwnProperty(f)&&typeof s[f]=="function"&&(a==null||a!=null&&!a[f])&&(s[f]=function(e,t,i){if(t.name=="abstract"){n.push(e);var s=String(t);s=s.replace(/(?:\/\*(?:[\s\S]*?)\*\/)|(?:[\s;]+\/\/(?:.*)$)/gm,"");if(!/^function abstract\(.*?\)\s*?{\s*?\}/m.test(String(s)))throw{name:"Error",message:"Abstract function "+r+"::"+f+" cannot contain a body"}}var o=function(){return t.apply(a?{_super:i}:null,arguments)};return o.abstract=t.name=="abstract",o.definedArguments=t.length,o.className=r,o}(f,s[f],a));if(!u&&n.length>0)throw{name:"Error",message:"Class "+r+" contains "+n.length+" abstract method"+(n.length==1?"":"s")+" and must be declared abstract or have those methods implemented ("+n.reverse().toString()+")"};var l=this;return s._instanceOf=function(e){return e===js_classes||l instanceof e||a&&a._instanceOf&&a._instanceOf(e)?!0:!1},s._construct&&e!==js_classes.PREVENTCONSTRUCT&&(s._construct.apply(null,arguments),delete s._construct),s};a.extend=n;var f=r.split(/\./),l=t;for(var c=0;c<f.length;++c)l[f[c]]||(l[f[c]]={}),c==f.length-1?l[f[c]]=a:l=l[f[c]];if(s){if(u)throw{name:"Error",message:"You cannot create an instance of abstract class "+r};var h=new a(js_classes.PREVENTCONSTRUCT);return h._construct&&(h._construct.apply(null,s),delete h._construct),e[f]=h,h}};js_classes.extend=n,js_classes.instances=function(t){return e[t]?e[t]:!1},js_classes.PREVENTCONSTRUCT="ED7352BC-BDDD-45BA-B0B5-3577A355665A-05A4367A-7CD1-4B54-91B0-F2DA44D4871A"})()
